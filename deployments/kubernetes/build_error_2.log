[0;34mBuilding mytsdb:latest...[0m
#0 building with "desktop-linux" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 399B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 2.21kB done
#2 DONE 0.0s

#3 [internal] load metadata for docker.io/library/ubuntu:22.04
#3 DONE 0.2s

#4 [stage-1  1/12] FROM docker.io/library/ubuntu:22.04@sha256:104ae83764a5119017b8e8d6218fa0832b09df65aae7d5a6de29a85d813da2fb
#4 DONE 0.0s

#5 [internal] load build context
#5 transferring context: 270.72kB 0.2s done
#5 DONE 0.2s

#6 [builder 2/6] RUN apt-get update && apt-get install -y     build-essential     cmake     git     libssl-dev     libprotobuf-dev     protobuf-compiler     libgrpc++-dev     libsnappy-dev     libtbb-dev     libspdlog-dev     rapidjson-dev     curl     && rm -rf /var/lib/apt/lists/*
#6 CACHED

#7 [builder 3/6] RUN curl -L -o /usr/include/httplib.h https://raw.githubusercontent.com/yhirose/cpp-httplib/v0.14.3/httplib.h
#7 CACHED

#8 [builder 4/6] WORKDIR /build
#8 CACHED

#9 [builder 5/6] COPY . .
#9 DONE 0.7s

#10 [builder 6/6] RUN make configure CMAKE_FLAGS="-DCMAKE_BUILD_TYPE=Release -DBUILD_TESTS=OFF -DBUILD_EXAMPLES=ON" &&     cd build && make prometheus_remote_storage_server -j$(nproc)
#10 0.095 Configuring TSDB project with CMake...
#10 0.095 mkdir -p build
#10 0.096 cd build && cmake .. -DCMAKE_BUILD_TYPE=Release -DBUILD_TESTS=OFF -DBUILD_EXAMPLES=ON
#10 0.142 -- The CXX compiler identification is GNU 11.4.0
#10 0.147 -- Detecting CXX compiler ABI info
#10 0.192 -- Detecting CXX compiler ABI info - done
#10 0.196 -- Check for working CXX compiler: /usr/bin/c++ - skipped
#10 0.196 -- Detecting CXX compile features
#10 0.197 -- Detecting CXX compile features - done
#10 0.199 -- Looking for C++ include pthread.h
#10 0.248 -- Looking for C++ include pthread.h - found
#10 0.248 -- Performing Test CMAKE_HAVE_LIBC_PTHREAD
#10 0.295 -- Performing Test CMAKE_HAVE_LIBC_PTHREAD - Success
#10 0.297 -- Found Threads: TRUE  
#10 0.301 -- Found spdlog, enabling logging support
#10 0.302 -- Found TBB, enabling concurrent data structures
#10 0.315 -- gRPC or Protobuf not found, building without RPC support
#10 0.317 -- Found httplib header in /usr/include
#10 0.317 -- Found httplib
#10 0.317 -- RapidJSON found. Headers: /usr/include
#10 0.317 -- Found RapidJSON
#10 0.318 -- Found Snappy
#10 0.318 -- Performing Test COMPILER_SUPPORTS_AVX512
#10 0.330 -- Performing Test COMPILER_SUPPORTS_AVX512 - Failed
#10 0.332 -- RapidJSON found. Headers: /usr/include
#10 0.335 -- RapidJSON found. Headers: /usr/include
#10 0.344 -- Found OpenSSL: /usr/lib/aarch64-linux-gnu/libcrypto.so (found version "3.0.2")  
#10 0.344 -- Found RapidJSON
#10 0.344 -- Found Protobuf
#10 0.344 -- Found Snappy for Prometheus Remote Storage
#10 0.345 -- gRPC not found, skipping data_gen tool
#10 0.346 -- OpenTelemetry not found, skipping example_client
#10 0.347 -- Checking dependencies for Prometheus Remote Storage example:
#10 0.347 --   HAVE_HTTPLIB: TRUE
#10 0.347 --   HAVE_RAPIDJSON: TRUE
#10 0.347 --   HAVE_PROTOBUF: TRUE
#10 0.347 -- Prometheus Remote Storage example enabled
#10 0.348 -- Configuring done
#10 0.363 -- Generating done
#10 0.364 -- Build files have been written to: /build/build
#10 0.387 [  3%] Generating alerts protobuf files
#10 0.387 [  3%] Generating remote protobuf files
#10 0.387 [  4%] Generating metrics protobuf files
#10 0.389 [libprotobuf WARNING google/protobuf/compiler/parser.cc:648] No syntax specified for the proto file: alerts.proto. Please use 'syntax = "proto2";' or 'syntax = "proto3";' to specify a syntax version. (Defaulted to proto2 syntax.)
#10 0.393 [  7%] Building CXX object src/tsdb/core/CMakeFiles/tsdb_core_impl.dir/internal/types.cpp.o
#10 0.393 [  7%] Building CXX object src/tsdb/core/CMakeFiles/tsdb_core_impl.dir/core.cpp.o
#10 0.408 [  9%] Building CXX object common/CMakeFiles/tsdb_proto.dir/metrics.pb.cc.o
#10 0.408 [ 10%] Building CXX object common/CMakeFiles/tsdb_proto.dir/remote.pb.cc.o
#10 0.408 [ 12%] Building CXX object common/CMakeFiles/tsdb_proto.dir/alerts.pb.cc.o
#10 0.842 [ 13%] Linking CXX shared library libtsdb_core_impl.so
#10 0.880 [ 13%] Built target tsdb_core_impl
#10 0.892 [ 16%] Building CXX object src/tsdb/storage/CMakeFiles/tsdb_storage_impl.dir/block_manager.cpp.o
#10 0.892 [ 18%] Building CXX object src/tsdb/storage/CMakeFiles/tsdb_storage_impl.dir/compression.cpp.o
#10 0.892 [ 19%] Building CXX object src/tsdb/storage/CMakeFiles/tsdb_storage_impl.dir/histogram_ops.cpp.o
#10 0.893 [ 22%] Building CXX object src/tsdb/storage/CMakeFiles/tsdb_storage_impl.dir/working_set_cache.cpp.o
#10 0.893 [ 22%] Building CXX object src/tsdb/storage/CMakeFiles/tsdb_storage_impl.dir/delta_of_delta_encoder.cpp.o
#10 0.893 [ 19%] Building CXX object src/tsdb/histogram/CMakeFiles/tsdb_histogram_impl.dir/histogram.cpp.o
#10 0.894 [ 24%] Building CXX object src/tsdb/storage/CMakeFiles/tsdb_storage_impl.dir/object_pool.cpp.o
#10 0.894 [ 25%] Building CXX object src/tsdb/storage/CMakeFiles/tsdb_storage_impl.dir/atomic_metrics.cpp.o
#10 0.900 [ 27%] Building CXX object src/tsdb/storage/CMakeFiles/tsdb_storage_impl.dir/performance_config.cpp.o
#10 0.928 [ 28%] Building CXX object src/tsdb/storage/CMakeFiles/tsdb_storage_impl.dir/background_processor.cpp.o
#10 1.187 In file included from /build/include/tsdb/storage/delta_of_delta_encoder.h:6,
#10 1.187                  from /build/src/tsdb/storage/delta_of_delta_encoder.cpp:1:
#10 1.187 /build/include/tsdb/storage/compression.h: In member function 'virtual uint32_t tsdb::storage::internal::RLELabelCompressor::add_label(const string&)':
#10 1.187 /build/include/tsdb/storage/compression.h:361:43: warning: unused parameter 'label' [-Wunused-parameter]
#10 1.187   361 |     uint32_t add_label(const std::string& label) override { return 0; } // Not used for RLE
#10 1.187       |                        ~~~~~~~~~~~~~~~~~~~^~~~~
#10 1.188 /build/include/tsdb/storage/compression.h: In member function 'virtual std::string tsdb::storage::internal::RLELabelCompressor::get_label(uint32_t) const':
#10 1.188 /build/include/tsdb/storage/compression.h:362:36: warning: unused parameter 'id' [-Wunused-parameter]
#10 1.188   362 |     std::string get_label(uint32_t id) const override { return ""; } // Not used for RLE
#10 1.188       |                           ~~~~~~~~~^~
#10 1.276 In file included from /build/src/tsdb/storage/compression.cpp:1:
#10 1.276 /build/include/tsdb/storage/compression.h: In member function 'virtual uint32_t tsdb::storage::internal::RLELabelCompressor::add_label(const string&)':
#10 1.276 /build/include/tsdb/storage/compression.h:361:43: warning: unused parameter 'label' [-Wunused-parameter]
#10 1.276   361 |     uint32_t add_label(const std::string& label) override { return 0; } // Not used for RLE
#10 1.276       |                        ~~~~~~~~~~~~~~~~~~~^~~~~
#10 1.276 /build/include/tsdb/storage/compression.h: In member function 'virtual std::string tsdb::storage::internal::RLELabelCompressor::get_label(uint32_t) const':
#10 1.276 /build/include/tsdb/storage/compression.h:362:36: warning: unused parameter 'id' [-Wunused-parameter]
#10 1.276   362 |     std::string get_label(uint32_t id) const override { return ""; } // Not used for RLE
#10 1.276       |                           ~~~~~~~~~^~
#10 1.283 [ 30%] Building CXX object src/tsdb/storage/CMakeFiles/tsdb_storage_impl.dir/lock_free_queue.cpp.o
#10 1.298 In file included from /build/include/tsdb/storage/internal/block_impl.h:8,
#10 1.298                  from /build/include/tsdb/storage/block_manager.h:14,
#10 1.298                  from /build/src/tsdb/storage/block_manager.cpp:1:
#10 1.298 /build/include/tsdb/storage/compression.h: In member function 'virtual uint32_t tsdb::storage::internal::RLELabelCompressor::add_label(const string&)':
#10 1.298 /build/include/tsdb/storage/compression.h:361:43: warning: unused parameter 'label' [-Wunused-parameter]
#10 1.298   361 |     uint32_t add_label(const std::string& label) override { return 0; } // Not used for RLE
#10 1.298       |                        ~~~~~~~~~~~~~~~~~~~^~~~~
#10 1.298 /build/include/tsdb/storage/compression.h: In member function 'virtual std::string tsdb::storage::internal::RLELabelCompressor::get_label(uint32_t) const':
#10 1.298 /build/include/tsdb/storage/compression.h:362:36: warning: unused parameter 'id' [-Wunused-parameter]
#10 1.298   362 |     std::string get_label(uint32_t id) const override { return ""; } // Not used for RLE
#10 1.298       |                           ~~~~~~~~~^~
#10 1.301 /build/src/tsdb/storage/atomic_metrics.cpp: In member function 'void tsdb::storage::internal::AtomicMetrics::recordCompression(size_t, size_t, uint64_t)':
#10 1.301 /build/src/tsdb/storage/atomic_metrics.cpp:53:68: warning: unused parameter 'compressed_size' [-Wunused-parameter]
#10 1.301    53 | void AtomicMetrics::recordCompression(size_t original_size, size_t compressed_size, uint64_t duration_ns) {
#10 1.301       |                                                             ~~~~~~~^~~~~~~~~~~~~~~
#10 1.301 /build/src/tsdb/storage/atomic_metrics.cpp: In member function 'void tsdb::storage::internal::AtomicMetrics::recordDecompression(size_t, size_t, uint64_t)':
#10 1.301 /build/src/tsdb/storage/atomic_metrics.cpp:64:48: warning: unused parameter 'compressed_size' [-Wunused-parameter]
#10 1.301    64 | void AtomicMetrics::recordDecompression(size_t compressed_size, size_t decompressed_size, uint64_t duration_ns) {
#10 1.301       |                                         ~~~~~~~^~~~~~~~~~~~~~~
#10 1.454 /build/src/tsdb/storage/background_processor.cpp: In member function 'std::unique_ptr<tsdb::storage::BackgroundTask> tsdb::storage::BackgroundProcessor::getNextTask()':
#10 1.454 /build/src/tsdb/storage/background_processor.cpp:269:10: warning: unused variable 'has_task' [-Wunused-variable]
#10 1.454   269 |     bool has_task = queue_condition_.wait_for(lock, config_.worker_wait_timeout, [this] {
#10 1.454       |          ^~~~~~~~
#10 1.551 [ 31%] Building CXX object src/tsdb/storage/CMakeFiles/tsdb_storage_impl.dir/cache_hierarchy.cpp.o
#10 1.591 /build/src/tsdb/histogram/histogram.cpp:20:9: warning: 'int32_t tsdb::histogram::{anonymous}::ComputeExponentialBucket(double, double, int32_t)' defined but not used [-Wunused-function]
#10 1.591    20 | int32_t ComputeExponentialBucket(double value, double base, int32_t scale) {
#10 1.591       |         ^~~~~~~~~~~~~~~~~~~~~~~~
#10 1.653 [ 33%] Building CXX object src/tsdb/storage/CMakeFiles/tsdb_storage_impl.dir/predictive_cache.cpp.o
#10 1.660 [ 34%] Building CXX object src/tsdb/storage/CMakeFiles/tsdb_storage_impl.dir/memory_mapped_cache.cpp.o
#10 1.756 [ 36%] Building CXX object src/tsdb/storage/CMakeFiles/tsdb_storage_impl.dir/atomic_ref_counted.cpp.o
#10 1.805 [ 37%] Building CXX object src/tsdb/storage/CMakeFiles/tsdb_storage_impl.dir/storage_impl.cpp.o
#10 1.896 [ 39%] Building CXX object src/tsdb/storage/CMakeFiles/tsdb_storage_impl.dir/storage_factory.cpp.o
#10 2.044 [ 40%] Building CXX object src/tsdb/storage/CMakeFiles/tsdb_storage_impl.dir/wal.cpp.o
#10 2.054 [ 42%] Linking CXX shared library libtsdb_histogram_impl.so
#10 2.143 [ 43%] Building CXX object src/tsdb/storage/CMakeFiles/tsdb_storage_impl.dir/sharded_wal.cpp.o
#10 2.223 [ 43%] Built target tsdb_histogram_impl
#10 2.281 [ 45%] Building CXX object src/tsdb/storage/CMakeFiles/tsdb_storage_impl.dir/async_wal_shard.cpp.o
#10 2.292 [ 46%] Building CXX object src/tsdb/storage/CMakeFiles/tsdb_storage_impl.dir/index.cpp.o
#10 2.314 /build/src/tsdb/storage/predictive_cache.cpp: In member function 'void tsdb::storage::PredictiveCache::record_prefetch_result(tsdb::core::SeriesID, bool)':
#10 2.314 /build/src/tsdb/storage/predictive_cache.cpp:223:61: warning: unused parameter 'series_id' [-Wunused-parameter]
#10 2.314   223 | void PredictiveCache::record_prefetch_result(core::SeriesID series_id, bool was_accessed) {
#10 2.314       |                                              ~~~~~~~~~~~~~~~^~~~~~~~~
#10 2.322 In file included from /build/src/tsdb/storage/storage_factory.cpp:1:
#10 2.322 /build/include/tsdb/storage/storage.h: In member function 'virtual tsdb::core::Result<std::vector<tsdb::core::TimeSeries> > tsdb::storage::Storage::query_aggregate(const std::vector<tsdb::core::LabelMatcher>&, int64_t, int64_t, const tsdb::core::AggregationRequest&)':
#10 2.322 /build/include/tsdb/storage/storage.h:83:48: warning: unused parameter 'matchers' [-Wunused-parameter]
#10 2.322    83 |         const std::vector<core::LabelMatcher>& matchers,
#10 2.322       |         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~
#10 2.322 /build/include/tsdb/storage/storage.h:84:17: warning: unused parameter 'start_time' [-Wunused-parameter]
#10 2.322    84 |         int64_t start_time,
#10 2.322       |         ~~~~~~~~^~~~~~~~~~
#10 2.322 /build/include/tsdb/storage/storage.h:85:17: warning: unused parameter 'end_time' [-Wunused-parameter]
#10 2.322    85 |         int64_t end_time,
#10 2.322       |         ~~~~~~~~^~~~~~~~
#10 2.322 /build/include/tsdb/storage/storage.h:86:41: warning: unused parameter 'aggregation' [-Wunused-parameter]
#10 2.322    86 |         const core::AggregationRequest& aggregation) {
#10 2.322       |         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~
#10 2.349 In file included from /build/include/tsdb/storage/internal/block_impl.h:8,
#10 2.349                  from /build/include/tsdb/storage/block_manager.h:14,
#10 2.349                  from /build/include/tsdb/storage/storage_impl.h:17,
#10 2.349                  from /build/src/tsdb/storage/storage_impl.cpp:29:
#10 2.349 /build/include/tsdb/storage/compression.h: In member function 'virtual uint32_t tsdb::storage::internal::RLELabelCompressor::add_label(const string&)':
#10 2.349 /build/include/tsdb/storage/compression.h:361:43: warning: unused parameter 'label' [-Wunused-parameter]
#10 2.349   361 |     uint32_t add_label(const std::string& label) override { return 0; } // Not used for RLE
#10 2.349       |                        ~~~~~~~~~~~~~~~~~~~^~~~~
#10 2.351 /build/include/tsdb/storage/compression.h: In member function 'virtual std::string tsdb::storage::internal::RLELabelCompressor::get_label(uint32_t) const':
#10 2.351 /build/include/tsdb/storage/compression.h:362:36: warning: unused parameter 'id' [-Wunused-parameter]
#10 2.351   362 |     std::string get_label(uint32_t id) const override { return ""; } // Not used for RLE
#10 2.351       |                           ~~~~~~~~~^~
#10 2.468 In file included from /build/include/tsdb/storage/internal/block_impl.h:8,
#10 2.468                  from /build/include/tsdb/storage/block_manager.h:14,
#10 2.468                  from /build/include/tsdb/storage/storage_impl.h:17,
#10 2.468                  from /build/src/tsdb/storage/storage_factory.cpp:2:
#10 2.468 /build/include/tsdb/storage/compression.h: In member function 'virtual uint32_t tsdb::storage::internal::RLELabelCompressor::add_label(const string&)':
#10 2.468 /build/include/tsdb/storage/compression.h:361:43: warning: unused parameter 'label' [-Wunused-parameter]
#10 2.468   361 |     uint32_t add_label(const std::string& label) override { return 0; } // Not used for RLE
#10 2.468       |                        ~~~~~~~~~~~~~~~~~~~^~~~~
#10 2.468 /build/include/tsdb/storage/compression.h: In member function 'virtual std::string tsdb::storage::internal::RLELabelCompressor::get_label(uint32_t) const':
#10 2.468 /build/include/tsdb/storage/compression.h:362:36: warning: unused parameter 'id' [-Wunused-parameter]
#10 2.468   362 |     std::string get_label(uint32_t id) const override { return ""; } // Not used for RLE
#10 2.468       |                           ~~~~~~~~~^~
#10 2.555 In file included from /build/include/tsdb/storage/storage_impl.h:19,
#10 2.555                  from /build/src/tsdb/storage/storage_impl.cpp:29:
#10 2.555 /build/include/tsdb/storage/storage.h: In member function 'virtual tsdb::core::Result<std::vector<tsdb::core::TimeSeries> > tsdb::storage::Storage::query_aggregate(const std::vector<tsdb::core::LabelMatcher>&, int64_t, int64_t, const tsdb::core::AggregationRequest&)':
#10 2.555 /build/include/tsdb/storage/storage.h:83:48: warning: unused parameter 'matchers' [-Wunused-parameter]
#10 2.555    83 |         const std::vector<core::LabelMatcher>& matchers,
#10 2.555       |         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~
#10 2.555 /build/include/tsdb/storage/storage.h:84:17: warning: unused parameter 'start_time' [-Wunused-parameter]
#10 2.555    84 |         int64_t start_time,
#10 2.555       |         ~~~~~~~~^~~~~~~~~~
#10 2.555 /build/include/tsdb/storage/storage.h:85:17: warning: unused parameter 'end_time' [-Wunused-parameter]
#10 2.555    85 |         int64_t end_time,
#10 2.555       |         ~~~~~~~~^~~~~~~~
#10 2.555 /build/include/tsdb/storage/storage.h:86:41: warning: unused parameter 'aggregation' [-Wunused-parameter]
#10 2.555    86 |         const core::AggregationRequest& aggregation) {
#10 2.555       |         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~
#10 2.680 [ 48%] Building CXX object src/tsdb/storage/CMakeFiles/tsdb_storage_impl.dir/sharded_index.cpp.o
#10 2.707 [ 50%] Building CXX object src/tsdb/storage/CMakeFiles/tsdb_storage_impl.dir/internal/block_impl.cpp.o
#10 3.092 In file included from /build/include/tsdb/storage/internal/block_impl.h:8,
#10 3.092                  from /build/src/tsdb/storage/internal/block_impl.cpp:1:
#10 3.092 /build/include/tsdb/storage/compression.h: In member function 'virtual uint32_t tsdb::storage::internal::RLELabelCompressor::add_label(const string&)':
#10 3.092 /build/include/tsdb/storage/compression.h:361:43: warning: unused parameter 'label' [-Wunused-parameter]
#10 3.092   361 |     uint32_t add_label(const std::string& label) override { return 0; } // Not used for RLE
#10 3.092       |                        ~~~~~~~~~~~~~~~~~~~^~~~~
#10 3.092 /build/include/tsdb/storage/compression.h: In member function 'virtual std::string tsdb::storage::internal::RLELabelCompressor::get_label(uint32_t) const':
#10 3.092 /build/include/tsdb/storage/compression.h:362:36: warning: unused parameter 'id' [-Wunused-parameter]
#10 3.092   362 |     std::string get_label(uint32_t id) const override { return ""; } // Not used for RLE
#10 3.092       |                           ~~~~~~~~~^~
#10 3.123 [ 51%] Linking CXX static library libtsdb_proto.a
#10 3.132 /build/src/tsdb/storage/internal/block_impl.cpp: In member function 'virtual std::vector<tsdb::core::TimeSeries> tsdb::storage::internal::BlockImpl::query(const std::vector<std::pair<std::__cxx11::basic_string<char>, std::__cxx11::basic_string<char> > >&, int64_t, int64_t) const':
#10 3.132 /build/src/tsdb/storage/internal/block_impl.cpp:82:13: warning: unused parameter 'start_time' [-Wunused-parameter]
#10 3.132    82 |     int64_t start_time,
#10 3.132       |     ~~~~~~~~^~~~~~~~~~
#10 3.132 /build/src/tsdb/storage/internal/block_impl.cpp:83:13: warning: unused parameter 'end_time' [-Wunused-parameter]
#10 3.132    83 |     int64_t end_time) const {
#10 3.132       |     ~~~~~~~~^~~~~~~~
#10 3.179 [ 51%] Built target tsdb_proto
#10 7.399 [ 53%] Linking CXX shared library libtsdb_storage_impl.so
#10 7.461 [ 53%] Built target tsdb_storage_impl
#10 7.471 [ 54%] Building CXX object src/CMakeFiles/tsdb_lib.dir/tsdb/query/query.cpp.o
#10 7.471 [ 56%] Building CXX object src/CMakeFiles/tsdb_lib.dir/tsdb/common/logger.cpp.o
#10 7.848 [ 57%] Linking CXX shared library libtsdb_lib.so
#10 7.898 [ 57%] Built target tsdb_lib
#10 7.908 [ 59%] Building CXX object src/tsdb/prometheus/CMakeFiles/tsdb_prometheus.dir/api/labels.cpp.o
#10 7.909 [ 60%] Building CXX object src/tsdb/prometheus/CMakeFiles/tsdb_prometheus.dir/model/types.cpp.o
#10 7.913 [ 62%] Building CXX object src/tsdb/prometheus/CMakeFiles/tsdb_prometheus.dir/api/query_handler.cpp.o
#10 7.913 [ 63%] Building CXX object src/tsdb/prometheus/CMakeFiles/tsdb_prometheus.dir/server/http_server.cpp.o
#10 7.915 [ 65%] Building CXX object src/tsdb/prometheus/CMakeFiles/tsdb_prometheus.dir/promql/ast.cpp.o
#10 7.917 [ 66%] Building CXX object src/tsdb/prometheus/CMakeFiles/tsdb_prometheus.dir/promql/lexer.cpp.o
#10 7.917 [ 68%] Building CXX object src/tsdb/prometheus/CMakeFiles/tsdb_prometheus.dir/promql/engine.cpp.o
#10 7.917 [ 69%] Building CXX object src/tsdb/prometheus/CMakeFiles/tsdb_prometheus.dir/promql/parser.cpp.o
#10 7.920 [ 71%] Building CXX object src/tsdb/prometheus/CMakeFiles/tsdb_prometheus.dir/promql/evaluator.cpp.o
#10 7.920 [ 72%] Building CXX object src/tsdb/prometheus/CMakeFiles/tsdb_prometheus.dir/promql/functions.cpp.o
#10 7.935 [ 74%] Building CXX object src/tsdb/prometheus/CMakeFiles/tsdb_prometheus.dir/promql/functions/rate.cpp.o
#10 7.959 [ 75%] Building CXX object src/tsdb/prometheus/CMakeFiles/tsdb_prometheus.dir/promql/functions/extrapolation.cpp.o
#10 7.978 /build/src/tsdb/prometheus/promql/ast.cpp:2:10: fatal error: lexer.h: No such file or directory
#10 7.978     2 | #include "lexer.h" // For TokenTypeToString
#10 7.978       |          ^~~~~~~~~
#10 7.978 compilation terminated.
#10 7.985 make[3]: *** [src/tsdb/prometheus/CMakeFiles/tsdb_prometheus.dir/build.make:132: src/tsdb/prometheus/CMakeFiles/tsdb_prometheus.dir/promql/ast.cpp.o] Error 1
#10 7.985 make[3]: *** Waiting for unfinished jobs....
#10 8.284 In file included from /build/include/tsdb/prometheus/promql/engine.h:8,
#10 8.284                  from /build/src/tsdb/prometheus/promql/engine.cpp:1:
#10 8.284 /build/include/tsdb/prometheus/storage/adapter.h: In member function 'virtual tsdb::prometheus::promql::Matrix tsdb::prometheus::storage::StorageAdapter::SelectAggregateSeries(const std::vector<tsdb::prometheus::model::LabelMatcher>&, int64_t, int64_t, const tsdb::core::AggregationRequest&)':
#10 8.284 /build/include/tsdb/prometheus/storage/adapter.h:38:49: warning: unused parameter 'matchers' [-Wunused-parameter]
#10 8.284    38 |         const std::vector<model::LabelMatcher>& matchers,
#10 8.284       |         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~
#10 8.284 /build/include/tsdb/prometheus/storage/adapter.h:39:17: warning: unused parameter 'start' [-Wunused-parameter]
#10 8.284    39 |         int64_t start,
#10 8.284       |         ~~~~~~~~^~~~~
#10 8.284 /build/include/tsdb/prometheus/storage/adapter.h:40:17: warning: unused parameter 'end' [-Wunused-parameter]
#10 8.284    40 |         int64_t end,
#10 8.284       |         ~~~~~~~~^~~
#10 8.284 /build/include/tsdb/prometheus/storage/adapter.h:41:41: warning: unused parameter 'aggregation' [-Wunused-parameter]
#10 8.284    41 |         const core::AggregationRequest& aggregation) {
#10 8.284       |         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~
#10 8.325 In file included from /build/include/tsdb/prometheus/promql/evaluator.h:4,
#10 8.325                  from /build/src/tsdb/prometheus/promql/evaluator.cpp:1:
#10 8.325 /build/include/tsdb/prometheus/storage/adapter.h: In member function 'virtual tsdb::prometheus::promql::Matrix tsdb::prometheus::storage::StorageAdapter::SelectAggregateSeries(const std::vector<tsdb::prometheus::model::LabelMatcher>&, int64_t, int64_t, const tsdb::core::AggregationRequest&)':
#10 8.325 /build/include/tsdb/prometheus/storage/adapter.h:38:49: warning: unused parameter 'matchers' [-Wunused-parameter]
#10 8.325    38 |         const std::vector<model::LabelMatcher>& matchers,
#10 8.325       |         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~
#10 8.325 /build/include/tsdb/prometheus/storage/adapter.h:39:17: warning: unused parameter 'start' [-Wunused-parameter]
#10 8.325    39 |         int64_t start,
#10 8.325       |         ~~~~~~~~^~~~~
#10 8.325 /build/include/tsdb/prometheus/storage/adapter.h:40:17: warning: unused parameter 'end' [-Wunused-parameter]
#10 8.325    40 |         int64_t end,
#10 8.325       |         ~~~~~~~~^~~
#10 8.325 /build/include/tsdb/prometheus/storage/adapter.h:41:41: warning: unused parameter 'aggregation' [-Wunused-parameter]
#10 8.325    41 |         const core::AggregationRequest& aggregation) {
#10 8.325       |         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~
#10 8.376 In file included from /build/include/tsdb/prometheus/promql/evaluator.h:4,
#10 8.376                  from /build/src/tsdb/prometheus/promql/functions.cpp:2:
#10 8.376 /build/include/tsdb/prometheus/storage/adapter.h: In member function 'virtual tsdb::prometheus::promql::Matrix tsdb::prometheus::storage::StorageAdapter::SelectAggregateSeries(const std::vector<tsdb::prometheus::model::LabelMatcher>&, int64_t, int64_t, const tsdb::core::AggregationRequest&)':
#10 8.376 /build/include/tsdb/prometheus/storage/adapter.h:38:49: warning: unused parameter 'matchers' [-Wunused-parameter]
#10 8.376    38 |         const std::vector<model::LabelMatcher>& matchers,
#10 8.376       |         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~
#10 8.377 /build/include/tsdb/prometheus/storage/adapter.h:39:17: warning: unused parameter 'start' [-Wunused-parameter]
#10 8.377    39 |         int64_t start,
#10 8.377       |         ~~~~~~~~^~~~~
#10 8.377 /build/include/tsdb/prometheus/storage/adapter.h:40:17: warning: unused parameter 'end' [-Wunused-parameter]
#10 8.377    40 |         int64_t end,
#10 8.377       |         ~~~~~~~~^~~
#10 8.377 /build/include/tsdb/prometheus/storage/adapter.h:41:41: warning: unused parameter 'aggregation' [-Wunused-parameter]
#10 8.377    41 |         const core::AggregationRequest& aggregation) {
#10 8.377       |         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~
#10 8.384 In file included from /build/include/tsdb/prometheus/promql/engine.h:8,
#10 8.384                  from /build/include/tsdb/prometheus/api/query_handler.h:5,
#10 8.384                  from /build/src/tsdb/prometheus/api/query_handler.cpp:1:
#10 8.384 /build/include/tsdb/prometheus/storage/adapter.h: In member function 'virtual tsdb::prometheus::promql::Matrix tsdb::prometheus::storage::StorageAdapter::SelectAggregateSeries(const std::vector<tsdb::prometheus::model::LabelMatcher>&, int64_t, int64_t, const tsdb::core::AggregationRequest&)':
#10 8.384 /build/include/tsdb/prometheus/storage/adapter.h:38:49: warning: unused parameter 'matchers' [-Wunused-parameter]
#10 8.384    38 |         const std::vector<model::LabelMatcher>& matchers,
#10 8.384       |         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~
#10 8.384 /build/include/tsdb/prometheus/storage/adapter.h:39:17: warning: unused parameter 'start' [-Wunused-parameter]
#10 8.384    39 |         int64_t start,
#10 8.384       |         ~~~~~~~~^~~~~
#10 8.384 /build/include/tsdb/prometheus/storage/adapter.h:40:17: warning: unused parameter 'end' [-Wunused-parameter]
#10 8.384    40 |         int64_t end,
#10 8.384       |         ~~~~~~~~^~~
#10 8.384 /build/include/tsdb/prometheus/storage/adapter.h:41:41: warning: unused parameter 'aggregation' [-Wunused-parameter]
#10 8.384    41 |         const core::AggregationRequest& aggregation) {
#10 8.384       |         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~
#10 8.384 In file included from /build/include/tsdb/prometheus/api/labels.h:7,
#10 8.384                  from /build/src/tsdb/prometheus/api/labels.cpp:1:
#10 8.384 /build/include/tsdb/storage/storage.h: In member function 'virtual tsdb::core::Result<std::vector<tsdb::core::TimeSeries> > tsdb::storage::Storage::query_aggregate(const std::vector<tsdb::core::LabelMatcher>&, int64_t, int64_t, const tsdb::core::AggregationRequest&)':
#10 8.384 /build/include/tsdb/storage/storage.h:83:48: warning: unused parameter 'matchers' [-Wunused-parameter]
#10 8.384    83 |         const std::vector<core::LabelMatcher>& matchers,
#10 8.384       |         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~
#10 8.384 /build/include/tsdb/storage/storage.h:84:17: warning: unused parameter 'start_time' [-Wunused-parameter]
#10 8.384    84 |         int64_t start_time,
#10 8.384       |         ~~~~~~~~^~~~~~~~~~
#10 8.384 /build/include/tsdb/storage/storage.h:85:17: warning: unused parameter 'end_time' [-Wunused-parameter]
#10 8.384    85 |         int64_t end_time,
#10 8.384       |         ~~~~~~~~^~~~~~~~
#10 8.384 /build/include/tsdb/storage/storage.h:86:41: warning: unused parameter 'aggregation' [-Wunused-parameter]
#10 8.384    86 |         const core::AggregationRequest& aggregation) {
#10 8.384       |         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~
#10 8.436 /build/src/tsdb/prometheus/promql/evaluator.cpp: In member function 'tsdb::prometheus::promql::Value tsdb::prometheus::promql::Evaluator::EvaluateAggregate(const tsdb::prometheus::promql::AggregateExprNode*)':
#10 8.436 /build/src/tsdb/prometheus/promql/evaluator.cpp:320:40: warning: comparison of integer expressions of different signedness: 'int' and 'std::vector<tsdb::prometheus::promql::Sample>::size_type' {aka 'long unsigned int'} [-Wsign-compare]
#10 8.436   320 |             for (int i = 0; i < k && i < sorted.size(); ++i) {
#10 8.436       |                                      ~~^~~~~~~~~~~~~~~
#10 8.454 In file included from /build/include/tsdb/prometheus/promql/evaluator.h:4,
#10 8.454                  from /build/src/tsdb/prometheus/promql/functions/rate.cpp:2:
#10 8.454 /build/include/tsdb/prometheus/storage/adapter.h: In member function 'virtual tsdb::prometheus::promql::Matrix tsdb::prometheus::storage::StorageAdapter::SelectAggregateSeries(const std::vector<tsdb::prometheus::model::LabelMatcher>&, int64_t, int64_t, const tsdb::core::AggregationRequest&)':
#10 8.454 /build/include/tsdb/prometheus/storage/adapter.h:38:49: warning: unused parameter 'matchers' [-Wunused-parameter]
#10 8.454    38 |         const std::vector<model::LabelMatcher>& matchers,
#10 8.454       |         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~
#10 8.454 /build/include/tsdb/prometheus/storage/adapter.h:39:17: warning: unused parameter 'start' [-Wunused-parameter]
#10 8.454    39 |         int64_t start,
#10 8.454       |         ~~~~~~~~^~~~~
#10 8.454 /build/include/tsdb/prometheus/storage/adapter.h:40:17: warning: unused parameter 'end' [-Wunused-parameter]
#10 8.454    40 |         int64_t end,
#10 8.454       |         ~~~~~~~~^~~
#10 8.454 /build/include/tsdb/prometheus/storage/adapter.h:41:41: warning: unused parameter 'aggregation' [-Wunused-parameter]
#10 8.454    41 |         const core::AggregationRequest& aggregation) {
#10 8.454       |         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~
#10 13.89 make[2]: *** [CMakeFiles/Makefile2:441: src/tsdb/prometheus/CMakeFiles/tsdb_prometheus.dir/all] Error 2
#10 13.89 make[1]: *** [CMakeFiles/Makefile2:507: examples/prometheus_remote_storage/CMakeFiles/prometheus_remote_storage_server.dir/rule] Error 2
#10 13.89 make: *** [Makefile:273: prometheus_remote_storage_server] Error 2
#10 ERROR: process "/bin/sh -c make configure CMAKE_FLAGS=\"-DCMAKE_BUILD_TYPE=Release -DBUILD_TESTS=OFF -DBUILD_EXAMPLES=ON\" &&     cd build && make prometheus_remote_storage_server -j$(nproc)" did not complete successfully: exit code: 2
------
 > [builder 6/6] RUN make configure CMAKE_FLAGS="-DCMAKE_BUILD_TYPE=Release -DBUILD_TESTS=OFF -DBUILD_EXAMPLES=ON" &&     cd build && make prometheus_remote_storage_server -j$(nproc):
8.454       |         ~~~~~~~~^~~~~
8.454 /build/include/tsdb/prometheus/storage/adapter.h:40:17: warning: unused parameter 'end' [-Wunused-parameter]
8.454    40 |         int64_t end,
8.454       |         ~~~~~~~~^~~
8.454 /build/include/tsdb/prometheus/storage/adapter.h:41:41: warning: unused parameter 'aggregation' [-Wunused-parameter]
8.454    41 |         const core::AggregationRequest& aggregation) {
8.454       |         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~
13.89 make[2]: *** [CMakeFiles/Makefile2:441: src/tsdb/prometheus/CMakeFiles/tsdb_prometheus.dir/all] Error 2
13.89 make[1]: *** [CMakeFiles/Makefile2:507: examples/prometheus_remote_storage/CMakeFiles/prometheus_remote_storage_server.dir/rule] Error 2
13.89 make: *** [Makefile:273: prometheus_remote_storage_server] Error 2
------
Dockerfile:30
--------------------
  29 |     # Build the project
  30 | >>> RUN make configure CMAKE_FLAGS="-DCMAKE_BUILD_TYPE=Release -DBUILD_TESTS=OFF -DBUILD_EXAMPLES=ON" && \
  31 | >>>     cd build && make prometheus_remote_storage_server -j$(nproc)
  32 |     
--------------------
ERROR: failed to solve: process "/bin/sh -c make configure CMAKE_FLAGS=\"-DCMAKE_BUILD_TYPE=Release -DBUILD_TESTS=OFF -DBUILD_EXAMPLES=ON\" &&     cd build && make prometheus_remote_storage_server -j$(nproc)" did not complete successfully: exit code: 2

View build details: docker-desktop://dashboard/build/desktop-linux/desktop-linux/y7pedu85aocpiwijdn7u02odp
make: *** [build-mytsdb] Error 1
